function cWKPages(h,i){var b=top._$("DIV[name="+h+"]",i,!0,!0),t={up:[3,2,1],down:[1,3,2]};this.__defineGetter__("top",function(){for(var c=0,a=0;a<b.length;a++)b[a].style.zIndex>b[c].style.zIndex&&(c=a);return b[c]});this.__defineGetter__("bottom",function(){for(var c=0,a=0;a<b.length;a++)b[a].style.zIndex<b[c].style.zIndex&&(c=a);return b[c]});for(var d=0;d<b.length;d++){var a=b[d];a.style.zIndex=b.length-d;a.prev=d?b[d-1]:b[b.length-1];a.next=d==b.length-1?b[0]:b[d+1];a.div=top._$("DIV",a);a.__defineGetter__("side",
function(){return this.getAttribute("name")});a.__defineGetter__("isTop",function(){return this.style.zIndex==3});a.__defineGetter__("top",function(){return this.isTop?this:this.next.top});a.__defineGetter__("sideInt",function(){return this.side=="left"?1:-1});a.__defineGetter__("hDeg",function(){return this.sideInt*(this.isTop?1:0)});a.__defineGetter__("vDeg",function(){return this.sideInt*90});a.display=function(a){this.transform(this[(a?"h":"v")+"Deg"])};a.hide=function(){this.transform(this.sideInt)};
a.transform=function(a,b){this.style.webkitTransitionDuration=(b||"0")+"s";this.style.webkitTransform="rotate3d(0, 1, 0, "+(a||"0")+"deg)"};a.moveTo=function(a){var b=this,d=0,a=t[a];do b.style.zIndex=a[d++];while(this!=(b=b.next))}}return this}
function cWKFlipper(h){function i(){if(m!=j.top)c.onPageChanged(k);n=!0}function b(e){return 0.002*((k?(e<0?90:0)+e:e<0?Math.abs(e):90-e)/90*parseInt(h.style.width)/2)}function t(e){n=!1;var a=e[0],c=e[1];if(a.hDeg>0?k:!k){if(Math.abs(a.lastDeg)==1)return i();c.moveTo("down");c.display(!1);window.$dom.transitionEndHandle(a,i);a.transform(a.hDeg,b(a.lastDeg))}else e=c.top,e.div.index>0&&e.hide(),c.moveTo("up"),c.transform(c.vDeg),window.$dom.transitionEndHandle(c,i),window.$dom.transitionEndHandle(a,
function(){a.display(!1);a.moveTo("down");c.transform(c.hDeg,b(c.vDeg))}),a.transform(a.vDeg,b(a.lastDeg))}function d(){var a=parseInt(h.style.width);if(f>g){if(o||!p)q=u.top,r=j.bottom,p=!0;var c=f-g}else{if(o||p)q=u.bottom,r=j.top,p=!1;c=a-(g-f)}o=!1;var a=Math.round(90/(a/2)*c),b=a<90?[q,r]:[r,q];s?(c=b[0],b=b[1],b.moveTo("down"),b.display(!1),c.moveTo("up"),c.lastDeg=a+(c.hDeg>0?1:-181),c.transform(c.lastDeg)):t(b)}function a(){return!(m.div.index<=1&&g<f||m.div.index>=c.pageCount&&g>f||!n)}var c=
this,v=[],m,j=new cWKPages("right",h),u=new cWKPages("left",h),l=top.$ua.isTouch(),n=!0,g,w,f,s,k,o,p,q,r;c.pageCount=0;c.disabled=!1;c.__defineGetter__("pagesTop",function(){return[u.top,j.top]});c.onPageChanged=function(){};c.handleEvent=function(a){if(c.disabled)return!0;v[a.type](a);return!1};(function(a){for(var b=0;b<a.length/2;b++)v[a[b*2]]=a[b*2+1],h.addEventListener(a[b*2],c)})([l?"touchstart":"mousedown",function(a){a.preventDefault();a.stopPropagation();if(n)m=j.top,g=(l?a.changedTouches[0]:
a).pageX,o=!0},l?"touchmove":"mousemove",function(b){if(g)f=(l?b.changedTouches[0]:b).pageX,a()&&(s=!0,d(),k=w>f,w=f)},l?"touchend":"mouseup",function(b){b.preventDefault();b.stopPropagation();s?(s=!1,a()&&d()):window.$dom.dispatchClick(b);g=0}]);return c};